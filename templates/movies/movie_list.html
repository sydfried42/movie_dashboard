<!-- templates/movies/movie_list.html -->

{% load static %}

<h1>Movie List</h1>

<!-- Table displaying movies -->
<table>
    <thead>
        <tr>
            <th>Title</th>
            <th>Release Year</th>
            <th>Rating</th>
            <th>Director</th>
            <th>Genre</th>
        </tr>
    </thead>
    <tbody>
        {% for movie in movies %}
            <tr>
                <td>{{ movie.series_title }}</td>
                <td>{{ movie.released_year }}</td>
                <td>{{ movie.imdb_rating }}</td>
                <td>{{ movie.director }}</td>
                <td>{{ movie.genre }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Chart.js -->
<h2>IMDb Ratings Over Time</h2>
<canvas id="ratingChart" width="400" height="200"></canvas>

<!-- Include Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Pass movie data into a global JavaScript variable -->
<script>
    window.movieData = JSON.parse('{{ movie_data|escapejs }}');  // Properly parsed JSON data
</script>

<!-- Include your external JavaScript file -->
<script src="{% static 'movies/movie_chart.js' %}"></script>

